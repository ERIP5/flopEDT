from base.models import Course, TrainingProgramme, StructuralGroup, Department, \
    TimeGeneralSettings, CourseType, RoomType, CourseStartTimeConstraint, TransversalGroup
from people.models import Tutor
from base.models import ModulePossibleTutors, Module, CoursePreference, UserPreference
from people.tutor import fill_default_user_preferences
from configuration.deploy_database import extract_database_file
from configuration.make_planif_file import make_planif_file
from MyFlOp.database_ENSMM import database_ENSMM
from MyFlOp.cours_ENSMM import cours_ENSMM
from configuration.hyperplanning import extract_courses_from_book
from misc.assign_colors import assign_module_color
from django.db import transaction


def global_extraction(abbrev='ENSMM', name='ENSMM', delete_groups=True):
    #Modif du book
    book = database_ENSMM
    append_conflicting_and_parallel_groups(book["groups"], book["transversal_groups"])
    define_one_period_per_train_prog(book)
    applyRoomTypes(book)
    extract_database_file(abbrev, name, book=book, fill_default_preferences=False)
    dep = Department.objects.get(abbrev=abbrev)
    optimize_settings(dep)
    for t in Tutor.objects.filter(departments=dep):
        fill_default_user_preferences(t, dep)
    extract_courses_from_book(cours_ENSMM, dep)
    # C = Course.objects.filter(type__department=dep)
    # for c in C:
    #     c.year += 1
    #     c.save()
    if delete_groups:
        remove_slash_groups(dep)
        g, tp = useless_groups_and_train_progs(dep)
        delete_useless_groups(g, tp)
    apply_group_architecture(find_group_architecture(dep))
    generate_course_preferences()
    #convert_to_transversal(database_ENSMM['transversal_groups'].keys())
    dep = Department.objects.get(abbrev=abbrev)
    make_planif_file(dep, with_courses=True)
    assign_module_color(dep, overwrite=True)
    #APPELLER LE SCRIPT POUR DEF LES GROUPES CONFLICT ET PARA

def find_group_architecture(dep):
    result = {}
    for tp in TrainingProgramme.objects.filter(department=dep):
        result[tp.name] = {}
        if 'MECA' in tp.name:
            i = tp.name[-1]
            result[tp.name][f'MECA{i}-TD1'] = {f'MECA{i}-TP1', f'MECA{i}-TP2'}
        else:
            G = StructuralGroup.objects.filter(train_prog=tp)
            for g in G:
                result[tp.name][g.name] = set()
                for g2 in G.exclude(id=g.id):
                    if g2.name.startswith(g.name):
                        result[tp.name][g.name].add(g2.name)
                if not result[tp.name][g.name]:
                    result[tp.name].pop(g.name)
            if not result[tp.name]:
                result.pop(tp.name)
    return result


def apply_group_architecture(group_architecture_dict):
    d = group_architecture_dict
    for tp in d:
        for g in d[tp]:
            try:
                G = StructuralGroup.objects.get(train_prog__name=tp, name=g)
            except StructuralGroup.DoesNotExist:
                print(f"pbm avec {tp} - {g} (qui n'existe pas...)")
                continue
            for g2 in d[tp][g]:
                G2 = StructuralGroup.objects.get(train_prog__name=tp, name=g2)
                for pg in G2.parent_groups.all():
                    G2.parent_groups.remove(pg)
                G2.parent_groups.add(G)
                G.basic = False
                G.save()
    for g in StructuralGroup.objects.filter(name__contains='Réunion'):
        o_g = g.parent_groups.all()[0]
        for c in Course.objects.filter(groups=g):
            c.groups.remove(g)
            c.groups.add(o_g)
        g.delete()
    produit = StructuralGroup.objects.get(name__contains='PROD')
    systeme = StructuralGroup.objects.get(name__contains='SYST')
    for g in StructuralGroup.objects.filter(name__in=['VS1', 'VS2']):
        g.parent_groups.remove(g.parent_groups.all()[0])
        g.parent_groups.add(systeme)
    for g in StructuralGroup.objects.filter(name__in=['VP1', 'VP2']):
        g.parent_groups.remove(g.parent_groups.all()[0])
        g.parent_groups.add(produit)


def useless_groups_and_train_progs(dep):
    groups = set()
    train_progs = set()
    G = StructuralGroup.objects.filter(train_prog__department=dep)
    C = Course.objects.filter(type__department=dep)
    for g in G:
        cg = C.filter(groups__in={g} | g.descendants_groups())
        if not cg:
            groups.add(g)
    for tp in TrainingProgramme.objects.filter(department=dep):
        if all(g in groups for g in G.filter(train_prog=tp)):
            train_progs.add(tp)
    return groups, train_progs


def delete_useless_groups(useless_groups, useless_train_progs):
    for g in useless_groups:
        g.delete()
    for tp in useless_train_progs:
        tp.delete()


def remove_slash_groups(dep):
    slash_groups = StructuralGroup.objects.filter(name__contains='/', train_prog__department=dep)
    for g in slash_groups:
        names = g.name.split('/')
        groups = StructuralGroup.objects.filter(name__in=names)
        for c in Course.objects.filter(groups=g):
            c.groups.remove(g)
            for group in groups:
                c.groups.add(group)
        g.train_prog.delete()


def optimize_settings(dep):
    tgs = TimeGeneralSettings.objects.get(department=dep)
    tgs.days = ['m', 'tu', 'w', 'th', 'f']
    tgs.default_preference_duration = 120
    tgs.save()
    CST = CourseStartTimeConstraint.objects.filter(course_type__department=dep)
    for cst in CST:
        l = [st for st in cst.allowed_start_times if st % 30 == 0]
        if l:
            cst.allowed_start_times = l
            cst.save()
    RT, created = RoomType.objects.get_or_create(name='None', department=dep)
    C = Course.objects.filter(type__department=dep)
    for i, c in enumerate(C):
        if i % 10 != 0:
            c.room_type = RT
            c.save()


@transaction.atomic
def convert_to_transversal(name_and_tp_groups_list):
    for tp, name in name_and_tp_groups_list:
        TP = TrainingProgramme.objects.get(abbrev=tp)
        if StructuralGroup.objects.filter(train_prog=TP, name=name).exists():
            group_to_convert = StructuralGroup.objects.get(train_prog=TP, name=name)
            Courses = Course.objects.filter(groups=group_to_convert)
            new_group = TransversalGroup.objects.create(name=name, train_prog=TP,
                                                        type=group_to_convert.type,
                                                        size=group_to_convert.size)
            group_to_convert.delete()
            for c in Courses:
                c.transversalgroups.add(new_group)
        else:
            print(f"pbm avec {tp} - {name} (qui n'existe pas...)")
            

#script conflict et para
def append_conflicting_and_parallel_groups(sgdict,tgdict):
    transversal_prom = {}
    structural_prom = {}

    #LV1 LV2  - SELF
    
    for tp,gp in tgdict:
        if tp not in transversal_prom: transversal_prom[tp]=[]
        transversal_prom[tp].append(gp)

    for tp,gp in tgdict: #On complète
        tgdict[(tp,gp)]['transversal_to'] = (tp,tp)   
        tgdict[(tp,gp)]['parallel_to'] = transversal_prom[tp]


def applyRoomTypes(dico):
    new_room_type = {'Amphithéatre': {'Amphi Pierre Mesnage (180 places)', 'Amphi Emilie du Châtelet (396 places)', 'Amphi Jules Haag (169 places)'}, 'Langue': {'2.28.34 (langues)', '2.24.34 (langues)', '2.22.34 (langues)', '2.26.34 (langues)'}, 'Informatique': {'2.16.31 (info 28 postes)', '-1.17.32 (info 15 postes)', '-1.34.28 (info 14 postes)', '1.32.32 (info 28 postes)', '0.13.31 (info 15 postes)', '1.30.33 (info 28 postes)', '0.34.32', '-1.15.31 (info 15 postes)', '0.31.34 (info 15 postes)', '-1.23.32 (info 28 postes)', '-1.18.33 (info 15 postes)'}, 'TP': {'1.16.33 (TP Electronique)', '-1.21.28 (salle grise)', 'Reprographie', '0.66.21 (Smart3 - 5 postes)', '1.27.34 (Smart - 28 postes)', 'Mifhysto - Micro-usinage', '-1.54.36 (matériaux)', '-1.55.34 (matériaux)', '-1.56.28 (projet)', '-1.62.34 (automatique)', 'Atelier Smart Vision', 'Atelier Smart Mécatronique', '-1.32.28 (TP Optique)', '-1.51.28 (optronique)', '-1.45.28 (mécanique)', 'Mifhysto - Fabrication additive', '-1.54.34 (matériaux)', '-1.55.32 (matériaux)', '0.68.21 (Smart2 - 7 postes)', '0.68.25 (Smart1 - 7 postes)', '-1.58.28 (projet)', 'Mifhysto - Métrologie', '-1.62.36 (projet CROC)', '1.18.34 (TP Electronique)', '-1.43.28 (mécanique)', '0.66.26 (Smart4 - 3 postes)', 'Atelier Smart Fabrication', '-1.53.28 (optique)', '-1.23.28 (salle grise)', 'Atelier Smart Robotique', '-1.62.28 (automatique)', '-1.40.28 (mécanique)', '-1.54.32 (matériaux)', '-1.41.28 (mécanique)', '-1.62.32 (projet SMR)', '1.13.31 (Smart - R.CHALEAT)', '-1.55.36 (matériaux)', '-1.64.32 (automatique)', 'Atelier Smart Réseau Industriel', '0.18.34 (salle blanche)', '-1.49.28 (conception)', '1.20.34  (TP Electronique)', '-1.64.36 (automatique)', 'Vision FEMTO-AS2M (atelier automatique)', 'Atelier (fabrication)', "Atelier (fabrication) '", '-1.26.28 (métrologie)'}, 'TD': {'-102', '001', '002', '-105', '-103', '2.30.33', '1.23.34 (Smart - 28 postes)', '-101', '2.20.34', '004', '2.17.32', '2.32.32', '2.33.31', '-104', '003', '005'}, 'Autres': {'Hall', 'salle de réunion Bâtiment Transfert n° 2', 'Mezzanine', 'Foyer', 'Salle des professeurs', 'Salle réunion LMS', 'Boxer', 'salle de réunion Bâtiment Transfert n° 3', 'Accueil ENSMM', 'salle de réunion Bâtiment Transfert n° 1', 'Hall Bis'}, 'Ne sais pas': {'IUT – Dpt GEA', 'FEMTO-DMA', 'Salle CFAI (1)', 'Salle CFAI (5)', 'ISBA', 'Salle Edgar Faure', 'CFA Montbéliard', 'IMEA', 'Complexe Sportif PSB', 'ISBA (2)', 'UFR-ST -Dép. SV', 'Salle Galilée (12 personnes)', 'Salle Copernic', 'Amphi CFAI', 'Scenic', 'Salles Design', 'Salle CFAI (3)', 'Salle CFAI (2)', 'Salle CFAI (6)', 'Salle CFAI (4)', 'UFC_mécanique_des_fluides'}}
    for k in new_room_type:
        dico["room_categories"][k]=new_room_type[k]


def isDuplicateModules(mod,tp,mpt):
    for prom in mpt:
        if prom != tp:
            if mod in mpt[prom]:
                return mod+"_"+tp
    return mod


def applyModulePossibleTutors():
    mpt = {'FA-MD1': {'INFO1-Informatique': {'TD_120m': ['krochdi'], 'Cours_120m': ['krochdi']}, 'ANG1-Anglais': {'TD_120m': ['mhsmedle']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_255m': [], 'Aucun_240m': [], 'Aucun_120m': [], 'Aucun_135m': [], 'Réunion ENSMM_240m': [], 'Aucun_720m': [], 'Aucun_615m': []}, 'QUAL1-Qualité': {'TD_120m': ['jmgallai']}, 'MECA1-Mécanique': {'Cours_120m': ['pbutaud', 'kmadani'], 'TD_120m': ['kmadani', 'pbutaud'], 'Examen_120m': ['kmadani', 'pbutaud']}, 'FA -Soutien Meca1': {'TD_120m': ['kmadani'], 'Aucun_120m': ['kmadani', 'pbutaud']}, 'Accueil': {'Aucun_240m': []}, "Rallye d'intégration": {'Aucun_270m': []}, 'GP1-Gestion de projet': {'TD_120m': ['pappenze']}, 'MSEE1-Maintenance': {'TD_120m': ['mpy']}, 'MATH1-Mathématiques': {'TD_120m': ['fvaresco']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'FA-Soutien MATH1': {'TD_120m': ['fvaresco', 'nalibaud']}, 'Réunion étudiants': {'Réunion ENSMM_120m': [], 'Réunion ENSMM_60m': []}, 'FA-MATH-Soutien': {'TD_240m': ['fvaresco', 'nalibaud']}, 'MATE1-Matériaux': {'TD_120m': ['pbercot'], 'Examen_120m': ['pbercot'], 'TP_240m': ['jgavoill']}, 'LP-MCGI-Maitrise des coûts': {'TD_120m': ['nboulang'], 'TD_240m': ['nboulang']}, 'MS-MCGI-Maitrise des coûts': {'TD_120m': ['mporbana'], 'TD_240m': ['mporbana']}, 'ANG2-Anglais': {'TD_120m': ['mhsmedle'], 'Examen_180m': ['mhsmedle']}, 'ML1-Management': {'TD_120m': ['csommaca']}, 'QUAL2-Qualité': {'TD_240m': ['jmgallai'], 'TD_120m': ['jmgallai']}, 'GP2-Gestion de projet': {'TD_240m': ['jmgallai']}, 'MECA2-Mécanique': {'TD_120m': ['kmadani', 'mouisse'], 'Cours_120m': ['kmadani', 'mouisse'], 'Examen_120m': ['fvaresco', 'mouisse']}, 'FA-Soutien Méca2': {'TD_120m': ['kmadani', 'mouisse']}, 'MCGI1-Maitrise des coûts': {'TD_120m': ['prondot']}, 'OPT1-Optique': {'Cours_120m': ['bcavalli'], 'TD_120m': ['bcavalli'], 'TP_240m': ['bcavalli']}, 'MICROTEC1-Microtechniques': {'Cours_120m': ['rjamault'], 'TP_240m': ['rjamault'], 'Examen_120m': ['rjamault']}, 'Soutenances ITII': {'Examen_600m': []}}, 'FA-MD1/MECA1': {'MATH1(MD1)/MATH1(MECA1)-Maths': {'Examen_120m': ['fvaresco'], 'Cours_120m': ['fvaresco']}, 'Réunion étudiants': {'Réunion ENSMM_120m': []}, 'PMI(MD1)/PMI(MECA1)': {'TD_120m': ['pgrailhe']}}, 'FA-MD2': {'MATE2-Matériaux': {'TD_120m': ['pbercot', 'jtakadoum'], 'TP_240m': ['relbeain']}, 'MSEE2-Maintenance Sécurité': {'TD_120m': ['pgrailhe'], 'TP_240m': ['pgrailhe'], 'Cours_120m': ['pgrailhe'], 'Examen_120m': ['pgrailhe']}, 'ELEC1-Electronique': {'TD_120m': ['jimbaud', 'rvicarin', 'nratier'], 'TP_240m': ['jimbaud', 'rvicarin', 'nratier'], 'Cours_120m': ['jimbaud', 'nratier'], 'Examen_120m': ['nratier']}, 'ANG3-Anglais': {'TP_120m': ['mhsmedle', 'oschmidt'], 'Examen_150m': ['oschmidt'], 'Examen_180m': ['oschmidt'], 'Examen_120m': ['mhsmedle', 'oschmidt']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_240m': [], 'Aucun_135m': [], 'Aucun_120m': ['fvaresco'], 'Aucun_255m': [], 'Aucun_720m': [], 'Aucun_615m': []}, 'QUAL3-Qualité': {'TD_120m': ['jmgallai']}, 'MCGI2-Maitrise des coûts': {'TD_120m': ['prondot', 'jtarbour']}, 'MATH2-Mathématiques': {'Cours_120m': ['fvaresco'], 'TD_120m': ['fvaresco']}, 'MECA3-Mécanique': {'Cours_120m': ['pbutaud'], 'TD_120m': ['pbutaud'], 'Examen_120m': ['pbutaud']}, 'ANG1-Anglais': {'Examen_180m': ['oschmidt', 'mhsmedle']}, 'ML2-Communication': {'TD_120m': ['sguyenot'], 'TP_120m': ['sguyenot']}, 'OPT2-Optique': {'TP_240m': ['bcavalli'], 'Cours_120m': ['bcavalli', 'dteyssie'], 'TD_120m': ['bcavalli', 'dteyssie'], 'Examen_120m': ['bcavalli']}, "Rallye d'intégration": {'Aucun_120m': []}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'MATH2 - Mathématiques': {'Examen_120m': ['fvaresco']}, 'LP-GEMM1-Gemmologie': {'TP_240m': ['hastric'], 'TP_120m': ['hastric'], 'Cours_120m': ['hastric'], 'TD_120m': ['hastric']}, 'MS-BIOMECA1-Biomécanique': {'TP_240m': ['pgrailhe'], 'Cours_120m': ['pgrailhe', 'ejacquet'], 'TD_120m': ['pgrailhe']}, 'MS-BIOCH-Biochimie': {'TP_240m': ['obenmbar'], 'Cours_120m': ['obenmbar'], 'TD_120m': ['obenmbar'], 'Examen_120m': ['obenmbar']}, 'LP-MICROTEC2-Microtechniqu': {'Cours_120m': ['rjamault'], 'TP_240m': ['rjamault']}, 'MATE3-Matériaux': {'TD_120m': ['pbercot', 'pstempfl'], 'TP_240m': ['jgavoill', 'relbeain']}, 'ELEC2-Electronique': {'Cours_120m': ['bcretin', 'jimbaud', 'nratier'], 'TD_120m': ['bcretin', 'jimbaud', 'nratier'], 'TP_240m': ['nratier']}, 'MS-MICROTEC2-Microtechniques': {'Cours_120m': ['epugin'], 'TD_120m': ['epugin']}, 'LP-CUIR-Travail du cuir': {'Cours_120m': ['manselmi'], 'TD_120m': ['manselmi'], 'TP_240m': ['manselmi']}, 'ANG4-Anglais': {'TP_120m': ['oschmidt', 'mhsmedle'], 'Examen_180m': ['oschmidt', 'mhsmedle'], 'Examen_240m': ['oschmidt', 'mhsmedle']}, 'MICROTEC2-Microtechniques': {'Cours_120m': ['smarguer', 'jyrauch'], 'TD_120m': ['sgauthie'], 'TP_240m': ['sgauthie'], 'Examen_120m': ['sgauthie', 'smarguer', 'jyrauch']}, 'MS-ARQ-Affaire réglementa': {'Cours_120m': ['jcandas'], 'TD_120m': ['jcandas'], 'Cours_240m': ['jcandas'], 'TD_240m': ['jcandas']}, 'LP-PROD-Productique': {'TD_120m': ['pappenze'], 'TD_240m': ['pappenze'], 'TP_240m': ['pappenze']}, 'MECA4-Mécanique': {'Cours_120m': ['kmadani', 'mouisse'], 'TD_120m': ['kmadani', 'mouisse'], 'Examen_120m': ['kmadani', 'fvaresco', 'mouisse']}, 'ELEC2 - Electronique': {'Examen_120m': ['nratier']}, 'MS-ROBOT1-Robotique': {'Cours_120m': ['krabenor'], 'TD_120m': ['krabenor'], 'TP_240m': ['krabenor'], 'Examen_120m': ['krabenor']}, 'LP-COART1-Conc artistique': {'TP_240m': ['jlbari'], 'TP_120m': ['jlbari'], 'TD_240m': ['ckueny', 'emaillot']}, 'LP-DSGN1-Design': {'TD_120m': ['ameyer'], 'Cours_240m': ['ameyer'], 'TD_240m': ['ameyer']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}}, 'FA-MD3': {'ELEC3-Electronique': {'Cours_120m': ['jimbaud', 'fsthal'], 'TP_240m': ['jimbaud', 'fsthal', 'smarguer'], 'TP_120m': ['fsthal', 'smarguer'], 'TD_120m': ['jimbaud', 'fsthal', 'smarguer'], 'Examen_120m': ['fsthal']}, 'MS-ROBOT2-Robotique': {'TD_120m': ['abolopio', 'nandreff'], 'Cours_120m': ['abolopio', 'nandreff'], 'TP_240m': ['nandreff', 'abolopio'], 'Examen_120m': ['nandreff', 'abolopio']}, 'MECA5-Métrologie': {'Cours_120m': ['pmalecot', 'cdielemans'], 'TD_120m': ['cdielemans', 'pmalecot'], 'TP_240m': ['nbodin'], 'Examen_120m': ['cdielemans']}, 'MATE4-Matériaux': {'TD_120m': ['pstempfl'], 'TP_240m': ['pstempfl', 'relbeain']}, 'ANG5-Anglais': {'TD_120m': ['oschmidt'], 'Examen_120m': ['oschmidt']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_240m': [], 'Aucun_120m': [], 'Aucun_720m': [], 'Aucun_615m': [], 'Aucun_135m': [], 'Aucun_255m': []}, 'MCGI3-Maitrise des couts': {'TD_120m': ['gparrang', 'pmarcoux', 'lmaisse']}, 'PROD-Productique': {'TD_240m': ['pappenze'], 'TP_240m': ['pappenze'], 'TD_120m': ['pappenze']}, "Rallye d'intégration": {'Aucun_270m': []}, 'ANG1-Anglais': {'Examen_180m': ['oschmidt', 'mhsmedle']}, 'GRH-Gestion Ressources Humain': {'TD_120m': ['orichard', 'csommaca']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'LP-COART2-Conception artis': {'TP_120m': ['adomini'], 'TD_120m': ['amaillot'], 'TD_240m': ['bdesoche'], 'TP_240m': ['adomini']}, 'LP-MATE5-Matériaux': {'TD_120m': ['phcornua', 'jtakadoum', 'pstempfl'], 'Cours_120m': ['phcornua', 'pstempfl', 'jtakadoum'], 'TP_240m': ['phcornua'], 'Examen_120m': ['jtakadoum', 'pstempfl', 'phcornua']}, 'MS-BIOMAT-Biomatériaux': {'TD_120m': ['pbercot', 'pstempfl'], 'Cours_120m': ['pbercot', 'pstempfl'], 'Examen_120m': ['pbercot', 'pstempfl']}, 'ML3-Management': {'TD_120m': ['orichard', 'sguyenot'], 'TD_240m': ['orichard']}, 'ANG6-Anglais': {'TD_120m': ['oschmidt']}, 'MS-MICROTEC3-Microtechniques': {'Cours_120m': ['epugin'], 'TD_120m': ['epugin'], 'TD_240m': ['epugin']}, 'LP-GEMM2-Gemmologie': {'Cours_240m': ['hastric'], 'TP_120m': ['hastric'], 'TP_240m': ['hastric']}, 'MS-ROBOT3-Robotique': {'Cours_120m': ['krabenor'], 'TP_240m': ['krabenor', 'fmarion']}, 'MS-BIOMECA2-Biomécanique': {'Cours_120m': ['pgrailhe', 'pvairac'], 'TP_240m': ['dteyssie', 'pgrailhe'], 'Examen_60m': ['pvairac']}, 'MSEE3-Maintenance': {'TD_120m': ['mpy'], 'TD_240m': ['mpy']}, 'ANG2-Anglais': {'Examen_240m': ['mhsmedle']}, 'INNOV-Innovation': {'TD_120m': ['bbelorge'], 'Cours_240m': ['bmigeot', 'cmulenet'], 'Cours_120m': ['bmigeot'], 'TD_240m': ['lguincha']}, 'ANG4-Anglais': {'Examen_240m': ['oschmidt', 'mhsmedle']}, 'LP-MICROTEC3-Microtechniques': {'Cours_120m': ['rjamault'], 'TD_120m': ['rjamault'], 'TP_240m': ['rjamault'], 'Examen_120m': ['rjamault']}, 'LP-DSGN3-Design': {'TD_120m': ['ameyer'], 'Cours_240m': ['ameyer'], 'TD_240m': ['ameyer']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}, 'Soutenances ITII': {'Examen_600m': []}}, 'FA-MECA1': {'MECA1-Mécanique': {'Examen_120m': ['cdielemans', 'pmalecot'], 'TP_240m': ['nbodin', 'hmeliani'], 'Cours_120m': ['cdielemans', 'pmalecot'], 'TD_120m': ['pmalecot', 'hmeliani', 'cdielemans']}, 'ANG1-Anglais': {'TD_120m': ['mhsmedle']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_135m': [], 'Aucun_240m': [], 'Aucun_120m': [], 'Aucun_255m': [], 'Réunion ENSMM_240m': [], 'Aucun_720m': [], 'Aucun_615m': []}, 'GP1-Gestion de Projets': {'TD_120m': ['jmgallai']}, 'MCGI1-Maitrise des couts': {'TD_120m': ['prondot', 'mporbana'], 'Examen_120m': ['mporbana']}, 'Accueil': {'Aucun_240m': []}, "Rallye d'intégration": {'Aucun_270m': []}, 'QUAL1-Qualité': {'TD_120m': ['pappenze']}, 'ML1-Management': {'TD_120m': ['csommaca']}, 'MSEE1-Maintenance': {'TD_120m': ['dtardy']}, 'MATH1-Mathématiques': {'TD_120m': ['fvaresco']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Réunion étudiants': {'Réunion ENSMM_120m': [], 'Réunion ENSMM_60m': []}, 'ANG2-Anglais': {'TD_120m': ['mhsmedle'], 'Examen_180m': ['mhsmedle']}, 'GP2-Gestion de projets': {'TD_240m': ['jmgallai'], 'TD_120m': ['jmgallai']}, 'PROD1-Productique': {'TD_240m': ['pappenze'], 'TD_120m': ['pappenze']}, 'ECOC1-Eco-conception': {'TD_120m': ['cgirardo'], 'TD_240m': ['cgirardo']}, 'MECA2-Fabrication': {'Examen_120m': ['pmalecot'], 'Cours_120m': ['cdielemans'], 'TD_120m': ['cdielemans']}, 'MATH2 - Mathématiques': {'Examen_120m': ['fvaresco']}, 'MATH2-Mathématiques': {'Cours_120m': ['fvaresco'], 'TD_120m': ['fvaresco'], 'Examen_120m': ['fvaresco']}, 'Soutenances ITII': {'Examen_600m': []}}, 'FA-MECA2': {'ELEC1-Electronique': {'Examen_120m': ['nratier'], 'TP_240m': ['nratier'], 'Cours_120m': ['nratier'], 'TD_120m': ['nratier']}, 'INFO1-Informatique': {'TP_120m': ['krochdi'], 'TP_240m': ['krochdi'], 'TD_120m': ['krochdi'], 'Cours_120m': ['krochdi']}, 'PROD2-Productique': {'TP_240m': ['pappenze'], 'TD_120m': ['pappenze'], 'TP_120m': ['pappenze']}, 'ML2-Management': {'TP_240m': ['sguyenot'], 'TP_120m': ['sguyenot'], 'TD_120m': ['sguyenot']}, 'ANG3-Anglais': {'TP_120m': ['oschmidt', 'mhsmedle'], 'Examen_150m': ['oschmidt'], 'Examen_180m': ['oschmidt'], 'Examen_120m': ['oschmidt', 'mhsmedle']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_240m': [], 'Aucun_135m': [], 'Aucun_120m': ['fvaresco'], 'Aucun_255m': [], 'Aucun_720m': [], 'Aucun_615m': [], 'Aucun_180m': []}, 'MSEE2-Maintenance': {'TD_120m': ['pgrailhe', 'mpy']}, 'MSEE2-Maintenance Sécurité': {'Examen_120m': ['pgrailhe']}, 'QUAL3-Qualité': {'TD_120m': ['pappenze']}, 'ANG1-Anglais': {'Examen_180m': ['oschmidt', 'mhsmedle']}, "Rallye d'intégration": {'Aucun_120m': []}, 'SAI1-Syst Autom Indus': {'Cours_120m': ['krochdi'], 'TD_120m': ['krochdi'], 'TP_240m': ['krochdi'], 'Cours_240m': ['krochdi']}, 'Réunion': {'Réunion ENSMM_30m': []}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'INNOV1-Innovation': {'TD_240m': ['eloberge'], 'TD_120m': ['bbelorge']}, 'ELEC2-Electronique': {'TP_240m': ['smarguer', 'jimbaud', 'bcretin'], 'Cours_120m': ['jimbaud', 'bcretin', 'fsthal'], 'TD_120m': ['jimbaud', 'bcretin', 'smarguer']}, 'ORGA1-Oragnisation': {'TP_120m': ['jmgallai'], 'TP_240m': ['jmgallai']}, 'MATE1-Matériaux': {'TD_120m': ['pstempfl', 'pbercot'], 'Examen_120m': ['pbercot'], 'TP_240m': ['relbeain']}, 'ANG4-Anglais': {'TP_120m': ['oschmidt', 'mhsmedle'], 'Examen_180m': ['oschmidt', 'mhsmedle'], 'Examen_240m': ['oschmidt', 'mhsmedle']}, 'MECA3-Fabrication': {'TD_240m': ['mfontain'], 'TD_120m': ['mfontain', 'cdielemans'], 'Cours_120m': ['cdielemans'], 'Examen_120m': ['mfontain', 'cdielemans']}, 'ELEC2 - Electronique': {'Examen_60m': ['fsthal']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}, 'Réunion étudiants': {'Réunion ENSMM_60m': []}}, 'FA-MECA3': {'ORGA2-Organisation': {'TP_120m': ['braguin'], 'TP_240m': ['braguin'], 'TD_120m': ['braguin']}, 'MATE2-Matériaux': {'TD_120m': ['pbercot', 'jtakadoum', 'pstempfl'], 'TP_240m': ['pstempfl', 'relbeain']}, 'MECA4-Conception': {'TP_240m': ['rjamault', 'sgauthie', 'nbodin', 'pmalecot'], 'TD_120m': ['sgauthie', 'jlardies', 'pmalecot'], 'Cours_120m': ['pmalecot'], 'Examen_120m': ['pmalecot'], 'Examen_60m': ['sgauthie']}, 'ANG5-Anglais': {'TP_120m': ['oschmidt', 'mhsmedle']}, 'Matière à préciser': {'Aucun_600m': [], 'Aucun_135m': [], 'Aucun_240m': [], 'Aucun_720m': [], 'Aucun_615m': []}, 'SAI2-Syst Autom Indus': {'TP_240m': ['zalmasry'], 'Cours_120m': ['zerhouni', 'nomri'], 'TD_120m': ['zerhouni', 'nomri'], 'Examen_120m': ['nomri']}, 'MCGI2-Maitrise des couts': {'TD_120m': ['prondot', 'jtarbour'], 'Examen_120m': ['prondot']}, "Rallye d'intégration": {'Aucun_270m': []}, 'ANG1-Anglais': {'Examen_180m': ['oschmidt', 'mhsmedle']}, 'ML3-Management': {'TD_120m': ['orichard', 'sguyenot'], 'TD_240m': ['orichard']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'PROD3-Productique': {'TP_120m': ['pappenze', 'rcatry', 'krabenor'], 'TD_120m': ['pappenze', 'zerhouni'], 'TD_240m': ['pappenze'], 'TP_240m': ['pappenze', 'rcatry'], 'Cours_120m': ['rcatry', 'zerhouni'], 'Examen_120m': ['zerhouni', 'rcatry']}, 'GRH1-Ress Humaines': {'TD_120m': ['orichard'], 'TD_240m': ['orichard']}, 'MCGI3-Maitrise des couts': {'TD_240m': ['gparrang', 'pmarcoux', 'lmaisse'], 'TD_120m': ['lmaisse']}, 'ANG6-Anglais': {'TP_120m': ['oschmidt', 'mhsmedle'], 'Examen_120m': ['oschmidt', 'mhsmedle']}, 'MSEE3-Maintenance': {'TP_240m': ['jmgallai']}, 'INFO2-Informatique': {'TP_240m': ['krochdi'], 'TP_120m': ['krochdi'], 'Cours_120m': ['krochdi'], 'Cours_240m': ['krochdi'], 'TD_120m': ['krochdi'], 'TD_240m': ['krochdi']}, 'ANG2-Anglais': {'Examen_240m': ['mhsmedle']}, 'ANG4-Anglais': {'Examen_240m': ['oschmidt', 'mhsmedle']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}, 'Réunion étudiants': {'Réunion ENSMM_60m': []}, 'Soutenances ITII': {'Examen_600m': []}}, 'FA-MD2/MECA3': {'MATE2(MD2)/MATE2(MECA3)-Matéri': {'Cours_120m': ['pbercot', 'jtakadoum']}, 'MATE2-Matériaux': {'Examen_120m': ['pbercot', 'jtakadoum']}}, 'FA-MD3/MECA3': {'MATE4(MD3)/MATE2(MECA3)-Matéri': {'Cours_120m': ['pstempfl'], 'Examen_120m': ['pstempfl']}}, 'FI-OPTION': {'SHS4-Droit': {'Examen_120m': ['glaurent', 'nbillot'], 'TD_120m': ['nbillot']}, 'SHS4-Management': {'Cours_240m': ['spierlot'], 'TD_120m': ['spierlot', 'jpmaujea'], 'Cours_120m': ['spierlot', 'gsauser']}, 'BMS1-Biomatériaux': {'Examen_120m': ['jtakadoum'], 'Cours_120m': ['jtakadoum']}, 'BMS2-Techno Salle Blanche': {'Cours_120m': ['tleblois']}, 'BMS2-Micromanipulation': {'Examen_120m': ['abolopio'], 'Cours_120m': ['abolopio']}, 'BMS3-Imagerie médicale': {'Examen_120m': ['pvairac'], 'Cours_120m': ['pvairac'], 'Cours_60m': ['pvairac']}, "BMS3-Traitement d'image": {'Examen_120m': ['nratier'], 'Cours_120m': ['nratier']}, 'LV1-Anglais': {'TD_120m': ['sbure', 'abellay', 'jduverge']}, 'BMS1-Biomécanique': {'TP_120m': ['pgrailhe'], 'Cours_120m': ['pgrailhe'], 'TP_180m': ['pgrailhe']}, 'CROC2-Composants des obj conne': {'Examen_120m': ['fsthal', 'nratier'], 'Conférence_240m': ['smarguer'], 'Cours_120m': ['jimbaud', 'nratier', 'fsthal'], 'TP_240m': ['jimbaud'], 'AA_120m': []}, 'CROC4-Traitement de données': {'Examen_120m': ['fsthal', 'ykersale', 'cvarnier'], 'Conférence_120m': ['jperquy'], 'Cours_120m': ['cvarnier', 'fsthal', 'ykersale'], 'TD_120m': ['cvarnier'], 'AA_240m': [], 'TP_240m': ['fsthal', 'cvarnier', 'sgalliou']}, 'IMM3-Conception de pièces flex': {'Examen_120m': ['sthibaud'], 'TP_240m': ['ftrivaud', 'vretel', 'smallet', 'sthibaud', 'hlenoir'], 'TP_120m': ['smallet'], 'TD_120m': ['smallet', 'sthibaud'], 'TD_240m': ['smallet'], 'Cours_120m': ['sthibaud']}, 'IMM4-Motorisation et Commande': {'Examen_120m': ['fsthal'], 'Cours_120m': ['cclevy', 'jimbaud', 'fsthal'], 'TD_120m': ['jimbaud', 'fsthal'], 'TP_240m': ['jimbaud']}, 'ISP3-Optimisation': {'Examen_120m': ['cvarnier', 'jmnicod'], 'Cours_120m': ['cvarnier', 'jmnicod'], 'TD_120m': ['jmnicod', 'cvarnier']}, 'MAS2-MECANIL': {'Examen_120m': ['sthibaud'], 'Cours_240m': ['hlenoir', 'sthibaud'], 'Cours_120m': ['sthibaud', 'frichard'], 'TD_120m': ['sthibaud'], 'TD_240m': ['sthibaud', 'hlenoir'], 'TP_240m': ['frichard', 'sthibaud', 'smallet', 'hlenoir']}, 'MAS5-SIMU': {'Examen_120m': ['hlenoir'], 'TD_240m': ['vretel', 'smallet'], 'TD_120m': ['smallet'], 'TP_240m': ['ftrivaud', 'sthibaud', 'smallet', 'hlenoir']}, 'MIND1-Usinage&métrol de précis': {'Examen_60m': ['pmalecot', 'cdielemans'], 'Cours_120m': ['pmalecot', 'mfontain', 'cdielemans', 'hmeliani'], 'TD_120m': ['mfontain', 'hmeliani', 'agilbin'], 'TP_240m': ['pmalecot', 'mfontain', 'agilbin', 'cdielemans'], 'TP_120m': ['gmichel', 'mpersone']}, 'MIND2-Opt des opérations deFab': {'Examen_120m': ['mfontain', 'nboudeau'], 'Cours_120m': ['mfontain', 'agilbin', 'pmalecot', 'nboudeau'], 'TP_240m': ['agilbin', 'pmalecot'], 'TP_120m': ['pmalecot', 'agilbin', 'nboudeau', 'gmichel'], 'TD_120m': ['agilbin', 'mfontain', 'pmalecot']}, 'MIND3-Conception intégrée prod': {'Examen_120m': ['nboudeau', 'hmeliani'], 'Cours_120m': ['pmalecot', 'hmeliani'], 'Cours_180m': ['cgazo'], 'Cours_60m': ['nboudeau'], 'TD_180m': ['cgazo'], 'TD_60m': ['nboudeau'], 'TP_240m': ['nboudeau'], 'TD_120m': ['hmeliani', 'braguin'], 'Conférence_120m': ['braguin'], 'TP_225m': ['slugant']}, 'MSF4-Corrosion protect surface': {'Examen_120m': ['pbercot'], 'Cours_120m': ['pagay', 'pbercot'], 'TD_120m': ['pbercot', 'pagay'], 'TP_240m': ['pbercot']}, 'SMR1-Identification': {'Examen_120m': ['eramasso'], 'Cours_120m': ['eramasso'], 'TD_120m': ['eramasso']}, 'SMR3-Robotique': {'Examen_180m': ['glaurent', 'krabenor'], 'Cours_120m': ['npiat', 'krabenor', 'glaurent'], 'TD_120m': ['glaurent', 'krabenor'], 'TP_240m': ['mlevezie', 'glaurent', 'krabenor']}, 'APROJE': {'Réunion ENSMM_240m': []}, 'Réunion RI': {'Réunion ENSMM_120m': ['npiat', 'fsthal'], 'Réunion ENSMM_90m': ['npiat']}, 'Accueil': {'Réunion ENSMM_30m': ['bdulmet', 'mouisse', 'rjamault', 'esadoule', 'gchevall', 'dteyssie', 'sthibaud', 'zalmasry', 'efoltete', 'mfontain', 'pbercot', 'glaurent', 'fsthal'], 'Réunion ENSMM_120m': ['nbodin']}, 'Réunion Stages/PFE': {'Réunion ENSMM_45m': ['fsthal', 'khaouchi']}, 'Réunion': {'Réunion ENSMM_45m': ['fsthal'], 'Réunion ENSMM_120m': ['nbodin']}, 'LV2-Japonais': {'TD_120m': ['fmizuno']}, 'INNOV1-Intelligence économique': {'Examen_120m': ['bmigeot'], 'Cours_120m': ['bmigeot', 'cmulenet', 'plaurent'], 'Cours_60m': []}, 'PIST': {'Examen_240m': ['nbodin', 'jimbaud', 'nratier', 'fsthal', 'dvernier'], 'TD_60m': ['jmnicod', 'sthibaud', 'efoltete', 'nratier', 'scogan', 'phcornua', 'vwalter', 'gchevall', 'pmalecot', 'sbure', 'cvarnier'], 'TD_120m': ['scogan', 'phcornua', 'jmnicod', 'zalmasry', 'fakoa', 'cvarnier', 'cdielemans', 'nbillot', 'rjamault', 'sthibaud', 'esadoule', 'efoltete', 'dvernier', 'jimbaud', 'smarguer', 'htran', 'mdechele', 'dteyssie', 'fsthal', 'epiat', 'jabadie', 'jduverge', 'gmichel', 'gchevall', 'vwalter', 'mouisse', 'hlenoir', 'jflanoy', 'mpersone', 'famiot', 'gcolas', 'pbercot', 'jgavoill', 'nmartin', 'jtakadoum', 'mdevel', 'npiat', 'mlevezie', 'ywu', 'glaurent', 'fmarion', 'rougeot'], 'TD_240m': ['phcornua', 'jyrauch', 'gcolas', 'fthiebau', 'dchapell', 'pstempfl', 'jbsanche', 'cvarnier', 'nomri', 'zalmasry', 'jmnicod', 'obougach', 'sthibaud', 'rjamault', 'jflanoy', 'efoltete', 'mouisse', 'scogan', 'ebachy1', 'kjabovis', 'smarguer', 'jimbaud', 'dvernier', 'fsthal', 'htran', 'eramasso', 'ywu', 'krabenor', 'mlevezie', 'jabadie', 'glaurent', 'epiat', 'mfontain', 'mdechele', 'dteyssie', 'jduverge', 'mpersone', 'fmarion', 'rougeot'], 'TD_180m': ['nomri', 'dvernier', 'efoltete', 'obougach', 'fmarion', 'rougeot', 'ywu', 'epiat', 'krabenor'], 'Examen_180m': ['zalmasry'], 'Examen_120m': ['efoltete', 'jimbaud', 'fsthal', 'htran', 'dvernier', 'nratier', 'nboudeau', 'cdielemans', 'mfontain', 'pmalecot', 'agilbin'], 'Cours_120m': ['krabenor'], 'TD_150m': []}, 'INNOV3-Marketing': {'Cours_120m': ['htran', 'spierlot']}, "INNOV4-Management de l'innovat": {'Cours_180m': ['mmenet'], 'Cours_120m': ['mmenet', 'htran', 'gdeloffr', 'spierlot'], 'Examen_120m': ['htran']}, 'INNOV2-Ingénierie frugale': {'Cours_120m': ['mbouton', 'cgazo', 'htran'], 'Cours_240m': ['htran']}, 'Matière à préciser': {'Aucun_240m': [], 'Examen_600m': []}, 'MSF1-Matériaux avancés': {'Cours_120m': ['mdevel', 'nmartin', 'fthiebau', 'mkadic', 'jtakadoum', 'fsthal', 'jbsanche'], 'TD_120m': ['fthiebau', 'nmartin', 'mkadic', 'jtakadoum'], 'Examen_120m': ['fsthal', 'jtakadoum', 'mkadic', 'jbsanche', 'nmartin', 'fthiebau'], 'TD_60m': ['fsthal', 'jbsanche']}, 'MSF2-Analyse surfaces et inter': {'Cours_120m': ['jtakadoum', 'nmartin', 'pstempfl'], 'TD_120m': ['jtakadoum', 'nmartin', 'pstempfl'], 'Examen_120m': ['pstempfl', 'nmartin', 'jtakadoum'], 'Conférence_120m': ['bdomenic', 'fpalmino']}, 'MSF3-Tribologie': {'Cours_120m': ['phcornua', 'jtakadoum', 'gcolas', 'pstempfl'], 'Examen_120m': ['jtakadoum', 'pstempfl', 'phcornua'], 'TD_120m': ['pstempfl', 'jtakadoum', 'phcornua'], 'TP_240m': ['pstempfl']}, 'ISP1-Gestion de production': {'Cours_120m': ['rgourive'], 'TD_120m': ['rgourive'], 'Conférence_120m': ['dheriban'], 'TP_240m': ['rgourive', 'cvarnier'], 'Examen_120m': ['rgourive']}, 'ISP1-syst inform industriel': {'Cours_120m': ['rgourive'], 'TP_120m': ['zerhouni', 'nomri']}, 'ISP1-Ordonnancement': {'TD_120m': ['cvarnier'], 'Cours_120m': ['cvarnier'], 'TP_240m': ['cvarnier']}, "ISP2- Simulation d'ateliers": {'TP_240m': ['zalmasry']}, 'ISP2-Modélisation syst de prod': {'Cours_120m': ['zerhouni'], 'TD_120m': ['zerhouni'], 'Examen_120m': ['zerhouni']}, 'ISP2-Théorie des files att': {'Cours_120m': ['jmnicod'], 'TD_120m': ['jmnicod'], 'TP_240m': ['jmnicod']}, 'ISP2- Evaluation performance': {'Cours_120m': ['zalmasry'], 'TD_120m': ['zalmasry'], 'Examen_120m': ['zalmasry'], 'TP_240m': ['zalmasry'], 'Examen_60m': ['zalmasry']}, 'ISP2-Eval de perf des syst ind': {'TP_240m': ['zalmasry']}, 'ISP3-Outils statistiques': {'Cours_120m': ['zalmasry'], 'TD_120m': ['zalmasry'], 'Examen_120m': ['zalmasry']}, 'ISP3-Intelligence artificielle': {'Cours_120m': ['nomri'], 'TD_120m': ['nomri']}, 'ISP3-Théorie des graphes': {'TD_120m': ['jmnicod'], 'Cours_120m': ['jmnicod'], 'Examen_120m': ['jmnicod']}, "ISP3-Outils de l'ingé product": {'Conférence_120m': ['mleouatn']}, 'ISP4-Maintenance sureté fonc': {'Cours_120m': ['zalmasry'], 'TD_120m': ['zalmasry'], 'Examen_120m': ['zalmasry']}, 'ISP4-Traitement de données': {'TD_120m': ['zalmasry'], 'Cours_120m': ['zalmasry']}, 'ISP4-Diagnostic': {'TD_120m': ['zerhouni'], 'Cours_120m': ['zerhouni']}, 'ISP4- Pronostic': {'TD_120m': ['eramasso'], 'Cours_120m': ['eramasso']}, 'ISP4-PHM et maintenance': {'Conférence_120m': ['afikrial', 'mleouatn']}, 'IMM1-Technologie microméca': {'Cours_120m': ['jflanoy', 'cclevy'], 'TD_120m': ['jflanoy', 'ameyer', 'sthibaud', 'emerat', 'cdielemans', 'rjamault'], 'TP_240m': ['emerat', 'cdielemans']}, 'IMM2-Conception et Procédés': {'Cours_120m': ['rjamault', 'cdielemans'], 'TP_240m': ['rjamault', 'sthibaud', 'cdielemans'], 'TD_120m': ['rjamault', 'sthibaud', 'ldembins', 'pmalecot'], 'TD_240m': ['ldembins'], 'Examen_120m': ['cdielemans', 'rjamault']}, 'MAS4-COROB': {'Cours_120m': ['vretel'], 'TD_120m': ['nbouhadd', 'vretel'], 'TP_240m': ['scogan', 'valmanza', 'vretel'], 'Examen_120m': ['vretel', 'nbouhadd']}, 'MAS3-DYNA': {'Cours_180m': ['mouisse', 'efoltete'], 'Cours_120m': ['scogan'], 'TD_240m': ['mouisse'], 'TP_240m': ['gchevall', 'esadoule', 'mouisse', 'efoltete', 'ebachy1', 'scogan', 'kjabovis'], 'TP_120m': ['efoltete', 'ebachy1'], 'Examen_120m': ['efoltete', 'mouisse'], 'Examen_60m': ['nbouhadd', 'scogan'], 'Examen_75m': ['nbouhadd', 'scogan']}, 'MAS1-MECAMAT': {'Cours_180m': [], 'Cours_120m': ['ftrivaud'], 'Cours_240m': ['ftrivaud'], 'TD_120m': ['frichard', 'ftrivaud', 'cberriet', 'jchamber'], 'TD_240m': ['ftrivaud'], 'TP_240m': ['ftrivaud', 'vplacet', 'cberriet', 'frichard', 'jchamber'], 'Examen_120m': ['cberriet', 'frichard', 'ftrivaud', 'jchamber'], 'TD_60m': ['frichard', 'cberriet', 'jchamber']}, 'CROC1-Conception,design et erg': {'Cours_120m': ['sgalliou', 'sidoux', 'fsthal'], 'TD_240m': ['sgomes', 'jimbaud'], 'TD_120m': ['jimbaud'], 'Cours_240m': ['sgomes'], 'Conférence_120m': ['cstrubel'], 'TP_240m': ['mpersone', 'sgomes']}, 'CROC3-Contrôle et réseaux': {'Cours_120m': ['fsthal', 'jimbaud'], 'TD_120m': ['fsthal', 'jimbaud'], 'TP_240m': ['jimbaud', 'fsthal'], 'Conférence_180m': ['rlarosa']}, 'BMS1-Physiologie/Handicap': {'Cours_120m': ['pgrailhe']}, 'BMS1-Prothèses': {'Cours_120m': ['pgrailhe']}, 'BMS1-Conférences': {'Conférence_120m': ['gpetreme']}, 'BMS1-Exosquelette': {'Cours_120m': ['pgrailhe']}, 'BMS3-Nanobiotechnologie': {'Cours_120m': ['fcheriou']}, 'BMS3-Bio fonctionnalisation': {'Cours_120m': []}, 'BMS4-Industrialisation': {'Cours_120m': ['mdechele']}, 'BMS4-Propriété intellectuelle': {'Cours_120m': ['jpmaujea']}, 'BMS3-Ultra vide': {'Cours_120m': ['jyrauch']}, 'SMR1-Modélisation': {'Cours_120m': ['ywu', 'epiat'], 'TD_120m': ['ywu', 'epiat']}, 'SMR2-Commande': {'Cours_120m': ['ywu', 'ylegorre'], 'TD_120m': ['rcatry', 'ylegorre', 'ywu']}, 'SMR4-Vision par ordinateur': {'Cours_120m': ['sdembele', 'nandreff'], 'TD_120m': ['sdembele', 'nandreff'], 'TD_270m': ['sdembele'], 'TP_240m': ['eramasso', 'aandre'], 'Cours_240m': ['nandreff'], 'Examen_90m': ['sdembele'], 'Examen_120m': ['nandreff']}, 'SMR5-Conférences industrielles': {'Conférence_120m': []}, 'MIND4-Qualité et Industr': {'Cours_120m': ['cdielemans', 'cgallet'], 'Conférence_120m': ['lnote', 'ffournie'], 'Conférence_180m': ['lnote'], 'Conférence_240m': ['cdupont'], 'TD_120m': ['cdupont', 'cdielemans'], 'TP_240m': ['cdielemans']}, 'LV2-Allemand': {'TD_120m': ['mkuhn'], 'TD_60m': ['mkuhn']}, 'BMS2-Conception de MEMS': {'Cours_120m': ['sgauthie'], 'TP_300m': ['sgauthie']}, 'BMS2-Microsystsèmes': {'Cours_120m': ['tleblois']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Examen': {'Examen_180m': ['efoltete']}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'LV2-Anglais Renforcé': {'TD_120m': ['jduverge', 'sgaberel', 'sbure']}, 'BMS3-Conférences': {'Conférence_240m': ['ctissot']}, 'Conférences': {'Aucun_60m': ['npiat']}, 'Présentation DD BsB/ENSMM': {'Réunion ENSMM_30m': []}, 'LV2-Espagnol': {'TD_120m': ['ecastrob'], 'TD_60m': ['ecastrob']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}}, 'FI-VERT': {'Réunion RI': {'Réunion ENSMM_120m': ['npiat', 'fsthal'], 'Réunion ENSMM_90m': ['npiat']}, 'SHEJS3-Ergonomie Physio': {'AA_120m': [], 'TD_120m': ['pgrailhe'], 'Examen_120m': ['pgrailhe']}, 'DYN2-Lagrange': {'TD_120m': ['mouisse', 'hlenoir', 'smallet'], 'TP_240m': ['mouisse', 'smallet', 'hlenoir'], 'Examen_120m': ['smallet', 'mouisse', 'hlenoir'], 'Cours_120m': ['mouisse', 'smallet'], 'TD_240m': ['mouisse', 'smallet', 'hlenoir']}, 'FAB2-Métrologie': {'TD_120m': ['pmalecot', 'cdielemans'], 'Examen_120m': ['cdielemans', 'pmalecot', 'rjamault'], 'Cours_120m': ['pmalecot', 'cdielemans'], 'TP_240m': ['pmalecot', 'cdielemans']}, 'LV1-Anglais': {'TD_120m': ['sgaberel', 'sbure', 'hparker', 'jcoady', 'jwest']}, 'Accueil': {'Réunion ENSMM_30m': ['rjamault', 'fsthal', 'khaouchi']}, 'Réunion': {'Réunion ENSMM_120m': ['fsthal'], 'Réunion ENSMM_150m': ['rjamault'], 'Réunion ENSMM_45m': ['fsthal'], 'Réunion ENSMM_60m': ['mouisse'], 'Réunion ENSMM_30m': ['npiat']}, 'OPT2-Optique': {'TP_240m': ['dteyssie'], 'Examen_120m': ['dteyssie'], 'Cours_120m': ['dteyssie'], 'TD_120m': ['dteyssie']}, 'SDM2-Science des matériaux': {'TP_240m': ['mdevel'], 'Cours_120m': ['nmartin', 'phcornua', 'mdevel'], 'Examen_60m': ['mdevel', 'phcornua'], 'Examen_120m': ['nmartin', 'mdevel', 'phcornua']}, 'OPT3-Optique': {'TP_240m': ['bcavalli'], 'Examen_120m': ['bcavalli'], 'Cours_120m': ['bcavalli'], 'TD_120m': ['bcavalli']}, 'µTECH2 - Microtechniques': {'Examen_120m': ['sgauthie', 'smarguer', 'jyrauch'], 'Cours_120m': ['jyrauch', 'smarguer', 'sgauthie'], 'TD_120m': ['sgauthie'], 'TP_240m': ['sgauthie']}, 'ELEC2-Conditionnement': {'Examen_120m': ['sgalliou', 'ykersale'], 'TD_120m': ['sgalliou', 'ykersale']}, 'INFO2-Informatique': {'Examen_240m': ['glaurent', 'cvarnier', 'obougach', 'jmnicod', 'mmbargan'], 'TP_120m': ['cvarnier', 'obougach', 'glaurent', 'jmnicod'], 'Cours_120m': ['glaurent', 'cvarnier'], 'TP_240m': ['cvarnier', 'obougach', 'glaurent', 'jmnicod']}, 'MATH4-EDP': {'Examen_120m': ['rtittare', 'rayoub'], 'Cours_120m': ['rtittare'], 'TD_120m': ['rtittare', 'rayoub']}, 'AUT2-Commande par µcontôleur': {'Examen_120m': ['epiat', 'npiat'], 'Cours_120m': ['npiat'], 'TD_120m': ['epiat', 'npiat'], 'TP_120m': ['epiat', 'obougach', 'npiat', 'nomri'], 'TP_240m': ['epiat', 'npiat', 'obougach', 'nomri']}, 'AUT2-Automatique avancée': {'Examen_120m': ['ylegorre', 'ywu', 'jtoledo1', 'rcatry', 'amattion'], 'Cours_120m': ['ylegorre'], 'TD_120m': ['ywu', 'amattion'], 'TP_240m': ['jtoledo1', 'rcatry', 'ywu', 'amattion']}, "FAB2-Plan d'expérience/qualité": {'Examen_120m': ['cdielemans', 'pmalecot'], 'Cours_120m': ['cdielemans', 'pmalecot'], 'TD_120m': ['pmalecot', 'cdielemans'], 'Conférence_120m': ['cgallet', 'cdielemans']}, 'µTECH1 - Microtechniques': {'Examen_120m': ['sgauthie', 'smarguer', 'jyrauch'], 'Cours_120m': ['smarguer', 'jyrauch', 'sgauthie'], 'TD_120m': ['sgauthie'], 'TP_240m': ['sgauthie']}, 'MATH4-Analyse Numérique': {'Cours_120m': ['gnamah'], 'TD_120m': ['rayoub', 'gnamah']}, 'FAB2-Méthodes de Fabrication': {'Cours_120m': ['cdielemans', 'mfontain'], 'TD_120m': ['cdielemans', 'rjamault', 'mfontain', 'agilbin'], 'TP_240m': ['cdielemans', 'agilbin'], 'Examen_180m': ['cdielemans', 'mfontain', 'agilbin'], 'Conférence_120m': ['cdielemans', 'cgallet']}, 'FAB2-Outillage': {'Cours_120m': ['rjamault'], 'TD_120m': ['rjamault', 'cdielemans']}, 'MATH3 + MATH4 - Systèmes': {'Examen_120m': ['gnamah', 'rayoub']}, 'AUT2-Optimisation': {'TP_240m': ['ywu', 'zalmasry', 'glaurent', 'epiat', 'eramasso'], 'Cours_120m': ['cvarnier', 'glaurent']}, 'CM3-Conception mécanique': {'TD_240m': ['nboudeau', 'mfontain'], 'Examen_120m': ['nboudeau', 'mfontain'], 'TD_120m': ['nboudeau', 'mfontain']}, 'CM2-Conception mécanique': {'TD_240m': ['jflanoy'], 'Examen_120m': ['jflanoy'], 'TD_120m': ['jflanoy'], 'Examen_240m': ['emerat', 'jflanoy']}, 'MATH3-Analyse Numérique': {'Cours_120m': ['gnamah'], 'TD_120m': ['rayoub', 'gnamah']}, 'LV2-Anglais Renforcé': {'TD_180m': ['sgaberel'], 'TD_120m': ['hparker', 'sgaberel', 'jduverge'], 'PRÉSENTIEL TD_120m': ['jduverge']}, 'LV2-Allemand': {'TD_120m': ['mkuhn']}, 'CDS-Calcul de structures': {'Cours_120m': ['sthibaud'], 'Examen_240m': ['ftrivaud', 'sthibaud', 'smallet', 'hlenoir'], 'Examen_120m': ['ftrivaud', 'sthibaud'], 'TD_120m': ['sthibaud', 'ftrivaud', 'hlenoir', 'smallet'], 'TP_240m': ['smallet', 'hlenoir', 'sthibaud', 'ftrivaud'], 'TD_240m': ['hlenoir', 'smallet'], 'TD_90m': ['hlenoir'], 'Examen_150m': ['smallet', 'ftrivaud', 'sthibaud', 'hlenoir'], 'TD_150m': ['hlenoir']}, 'MATH3-EDP': {'TD_240m': ['rtittare'], 'TD_120m': ['rtittare'], 'Examen_120m': ['rtittare'], 'Cours_120m': ['rtittare']}, 'SDM3-Science des matériaux': {'Cours_120m': ['mdevel', 'phcornua', 'nmartin'], 'Examen_60m': ['mdevel', 'phcornua'], 'Examen_120m': ['nmartin', 'mdevel', 'phcornua'], 'TD_120m': ['mdevel', 'phcornua', 'nmartin'], 'TP_240m': ['mdevel', 'phcornua', 'nmartin']}, 'ELEC2-Conversion': {'Cours_120m': ['nratier'], 'TD_120m': ['nratier']}, 'ELEC2-Dimensionnement': {'Cours_120m': ['jimbaud'], 'TD_120m': ['bcretin', 'jimbaud'], 'TP_240m': ['bcretin', 'rvicarin']}, 'ELEC2-Labview': {'Cours_120m': ['fsthal'], 'Examen_120m': ['fsthal', 'smarguer'], 'TD_240m': ['fsthal', 'smarguer'], 'TP_240m': ['fsthal', 'smarguer'], 'TD_120m': ['fsthal']}, 'DYN2-Vibrations': {'TP_240m': ['efoltete', 'rchabrie', 'hlenoir', 'mouisse'], 'Cours_120m': ['efoltete', 'mouisse'], 'Examen_120m': ['efoltete', 'hlenoir', 'mouisse'], 'TD_240m': ['hlenoir', 'efoltete', 'mouisse'], 'TD_120m': ['mouisse', 'efoltete']}, 'LV2-Espagnol': {'TD_60m': ['ecastrob'], 'TD_120m': ['ecastrob'], 'TD_180m': ['ecastrob'], 'TD_150m': ['ecastrob']}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'LV2-Japonais': {'TD_120m': ['fmizuno']}, 'Conférences': {'Aucun_60m': ['npiat'], 'Aucun_120m': ['npiat']}, 'Présentation DD BsB/ENSMM': {'Réunion ENSMM_30m': []}, 'Examen': {'Examen_120m': ['fsthal']}, 'Soutenances stages': {'Examen_600m': []}, 'Matière à préciser': {'Examen_600m': []}, 'Service sanitaire': {'Conférence_120m': []}, 'Réservation de salles': {'Réunion ENSMM_90m': []}, 'Réunion étudiants': {'Réunion ENSMM_60m': []}}, 'FI-BLEU': {'SHEJS1-Gestion financière': {'Examen_120m': ['nbillot'], 'TD_120m': ['nbillot']}, 'MATH1-Analyse statistique': {'Examen_120m': ['gnamah', 'ibaraqui'], 'Cours_120m': ['gnamah'], 'TD_120m': ['ibaraqui', 'gnamah']}, 'MATH1-Calcul vectoriel & matr': {'Examen_120m': ['kmadani', 'gnamah', 'rayoub', 'fvaresco'], 'Cours_120m': ['gnamah'], 'TD_120m': ['kmadani', 'rayoub', 'fvaresco']}, 'MMC2-Mécanique': {'Examen_120m': ['vretel', 'smallet', 'ftrivaud', 'hlenoir', 'sthibaud'], 'Cours_120m': ['ftrivaud', 'efoltete', 'vretel'], 'TD_120m': ['vretel', 'smallet', 'ftrivaud', 'hlenoir', 'sthibaud'], 'TD_240m': ['vretel', 'smallet', 'ftrivaud', 'hlenoir'], 'TP_240m': ['smallet', 'hlenoir', 'ftrivaud', 'vretel', 'sthibaud'], 'TP_120m': ['sthibaud']}, 'PROD1-Gestion de production': {'Examen_120m': ['zerhouni', 'zalmasry'], 'Cours_120m': ['zerhouni', 'zalmasry'], 'TD_120m': ['zerhouni', 'zalmasry']}, 'AUT1-Automatique': {'Examen_120m': ['ylegorre', 'eramasso', 'krabenor', 'ywu', 'mlevezie', 'dvanguye', 'jtoledo1', 'rcatry', 'amattion'], 'TP_240m': ['ywu', 'jtoledo1', 'amattion', 'rcatry', 'krabenor', 'dvanguye', 'eramasso', 'qboyer'], 'Cours_120m': ['ylegorre'], 'TD_120m': ['ywu', 'eramasso', 'krabenor', 'jtoledo1'], 'Examen_90m': ['krabenor']}, 'LV1-Anglais': {'TD_120m': ['sbure', 'abellay', 'jduverge', 'jwest'], 'TD_150m': ['jwest']}, 'Accueil': {'Réunion ENSMM_45m': ['pvairac', 'rjamault', 'npiat'], 'Réunion ENSMM_15m': ['mkuhn'], 'Réunion ENSMM_30m': ['jgavoill'], 'Réunion ENSMM_105m': ['jgavoill'], 'Réunion ENSMM_120m': ['fsthal', 'khaouchi']}, 'Examen': {'Examen_150m': ['abellay', 'jduverge', 'sgaberel'], 'Examen_120m': ['abellay', 'jduverge', 'sgaberel']}, 'Réunion': {'Réunion ENSMM_120m': ['fsthal'], 'Réunion ENSMM_150m': ['rjamault'], 'Réunion ENSMM_60m': ['mouisse', 'efoltete', 'mfontain', 'pbercot', 'nbodin', 'glaurent', 'pstempfl', 'fsthal', 'dteyssie'], 'Réunion ENSMM_90m': ['sthibaud', 'zalmasry'], 'Réunion ENSMM_30m': ['npiat']}, 'Réunion RI': {'Réunion ENSMM_90m': ['npiat']}, 'LV2-Allemand': {'TD_120m': ['mkuhn']}, 'FAB1 - Métrologie': {'AA_180m': [], 'TP_240m': ['cdielemans', 'hmeliani', 'nbodin', 'sgauthie', 'pmalecot'], 'Cours_120m': ['cdielemans', 'pmalecot'], 'TD_120m': ['cdielemans', 'agilbin', 'pmalecot'], 'Examen_120m': ['nbodin', 'cdielemans', 'agilbin']}, 'FAB1 - Fabrication mécanique': {'TP_240m': ['rjamault', 'sgauthie', 'hmeliani', 'agilbin', 'msahli'], 'AA_120m': [], 'Cours_120m': ['mfontain', 'pmalecot', 'rjamault', 'cdielemans', 'agilbin'], 'Examen_120m': ['cdielemans', 'mfontain', 'pmalecot', 'agilbin', 'rjamault', 'sgauthie'], 'Examen_45m': ['cdielemans', 'mfontain', 'pmalecot', 'agilbin'], 'Examen_60m': ['mfontain', 'agilbin', 'rjamault', 'sgauthie', 'msahli']}, 'MMC1-Mécanique': {'Cours_120m': ['vretel', 'ftrivaud'], 'Examen_120m': ['vretel', 'smallet', 'sthibaud', 'hlenoir', 'ftrivaud', 'rchabrie'], 'TD_120m': ['vretel', 'smallet', 'sthibaud', 'hlenoir', 'ftrivaud'], 'TD_240m': ['vretel', 'smallet', 'sthibaud', 'hlenoir', 'ftrivaud'], 'TP_240m': ['hlenoir', 'vretel', 'ftrivaud', 'rchabrie', 'smallet', 'fchatti']}, 'TS1-Traitement du Signal': {'Cours_120m': ['sgalliou'], 'Examen_120m': ['efoltete', 'sgalliou', 'ykersale', 'epiat', 'fsthal', 'agilbin', 'smarguer'], 'TD_120m': ['efoltete', 'sgalliou', 'agilbin', 'epiat', 'ykersale', 'fsthal', 'smarguer']}, 'FAB1 - Qualité/PEX': {'Cours_120m': ['cdielemans']}, 'INFO1-Informatique': {'Cours_120m': ['jmnicod'], 'Examen_120m': ['cvarnier', 'mlevezie', 'mmbargan', 'mbenaiss', 'glaurent', 'epiat', 'npiat', 'eramasso', 'jmnicod', 'obougach', 'kbenaggo'], 'TD_120m': ['epiat', 'cvarnier', 'jmnicod', 'npiat', 'glaurent', 'eramasso'], 'TD_240m': ['epiat', 'cvarnier', 'jmnicod', 'npiat'], 'TP_120m': ['epiat', 'mbenaiss', 'jmnicod', 'cvarnier', 'obougach', 'mmbargan', 'npiat', 'mlevezie', 'glaurent', 'eramasso', 'kbenaggo'], 'TP_240m': ['epiat', 'obougach', 'mmbargan', 'mbenaiss', 'cvarnier', 'jmnicod', 'npiat', 'mlevezie', 'glaurent', 'kbenaggo', 'eramasso'], 'Examen_180m': ['epiat', 'mbenaiss', 'cvarnier', 'obougach', 'jmnicod', 'npiat', 'mlevezie'], 'Rattrapages_120m': ['glaurent', 'epiat', 'eramasso', 'jmnicod']}, 'LV2-Anglais Renforcé': {'TD_120m': ['abellay', 'jduverge', 'sbure'], 'PRÉSENTIEL TD_120m': ['jduverge']}, 'Réunion étudiants': {'Réunion ENSMM_60m': [], 'Réunion ENSMM_120m': []}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'LV2-Espagnol': {'TD_120m': ['ecastrob'], 'TD_60m': ['ecastrob'], 'TD_150m': ['ecastrob'], 'TD_180m': ['ecastrob']}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'LV2-Japonais': {'TD_120m': ['mishii'], 'TD_90m': ['mishii']}, 'Présentation DD BsB/ENSMM': {'Réunion ENSMM_30m': []}, 'Soutenances stages': {'Examen_600m': []}, 'Service sanitaire': {'Conférence_120m': []}, 'Conférences': {'Aucun_120m': ['npiat']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}}, 'FI-JAUNE': {'LV1-Anglais': {'TD_120m': ['sbure', 'jduverge', 'jwest', 'abellay'], 'TD_150m': ['jwest']}, 'Accueil': {'Réunion ENSMM_45m': ['pvairac', 'rjamault', 'npiat'], 'Réunion ENSMM_15m': ['mkuhn'], 'Réunion ENSMM_30m': ['jgavoill'], 'Réunion ENSMM_105m': ['jgavoill'], 'Réunion ENSMM_120m': ['fsthal', 'khaouchi']}, 'Examen': {'Examen_150m': ['abellay', 'jduverge', 'sgaberel'], 'Examen_120m': ['abellay', 'jduverge', 'sgaberel']}, 'Réunion': {'Réunion ENSMM_120m': ['fsthal'], 'Réunion ENSMM_150m': ['rjamault'], 'Réunion ENSMM_60m': ['mouisse', 'efoltete', 'mfontain', 'pbercot', 'nbodin', 'glaurent', 'pstempfl', 'fsthal', 'dteyssie'], 'Réunion ENSMM_90m': ['sthibaud', 'zalmasry'], 'Réunion ENSMM_30m': ['npiat']}, 'Réunion RI': {'Réunion ENSMM_90m': ['npiat']}, 'SDM1-Structure des matériaux': {'Examen_120m': ['mdevel', 'pbercot', 'jtakadoum', 'relbeain'], 'Cours_120m': ['mdevel', 'jtakadoum'], 'TD_120m': ['pbercot', 'mdevel', 'jtakadoum', 'relbeain'], 'TP_240m': ['relbeain', 'mdevel', 'nmartin', 'smith']}, 'SDM1-Métallurgie physique': {'Examen_120m': ['jgavoill', 'phcornua', 'jtakadoum', 'lbebon'], 'AA_120m': [], 'Cours_120m': ['jgavoill', 'phcornua'], 'TD_120m': ['phcornua', 'jgavoill', 'lbebon', 'jtakadoum'], 'TP_240m': ['lbebon', 'jgavoill', 'phcornua']}, 'SDM1-Polymères': {'Examen_120m': ['jgavoill', 'phcornua', 'mayem'], 'AA_120m': [], 'Cours_120m': ['phcornua', 'jgavoill'], 'TD_120m': ['jgavoill', 'phcornua'], 'TP_240m': ['phcornua', 'jgavoill', 'mayem']}, 'MATH2-Transformation & Distrib': {'Examen_120m': ['rbarrere', 'fvaresco'], 'Cours_120m': ['fvaresco'], 'TD_120m': ['fvaresco']}, 'CM1-Conception Mécanique': {'Examen_120m': ['jflanoy', 'emerat'], 'TD_120m': ['jflanoy', 'emerat'], 'TD_240m': ['jflanoy', 'emerat'], 'TP_240m': ['jflanoy', 'emerat'], 'Examen_240m': ['emerat', 'jflanoy']}, 'SHEJS2-Sciences humaines & soc': {'TD_120m': ['spierlot']}, 'ELEC1-Electronique': {'Cours_120m': ['sgalliou', 'ykersale'], 'TD_120m': ['ykersale', 'smarguer', 'sgalliou', 'mabdelha'], 'Examen_120m': ['sgalliou', 'ykersale', 'smarguer', 'mabdelha', 'tgarnier'], 'TP_240m': ['smarguer', 'rvicarin', 'bdubois', 'ykersale', 'mabdelha', 'cfluhr', 'tgarnier'], 'Rattrapages_240m': []}, 'OPT1-Optique': {'Cours_120m': ['bcavalli'], 'Examen_120m': ['bcavalli', 'dteyssie', 'mabdelha'], 'TD_120m': ['dteyssie', 'bcavalli', 'mabdelha'], 'TP_240m': ['yhaddad1', 'mabdelha', 'krosenzi', 'bcavalli', 'dteyssie', 'ceustach']}, 'MATH2-Calcul des variations': {'Cours_120m': ['rbarrere'], 'TD_120m': ['rbarrere']}, 'MATH2-Modélisation': {'TD_120m': ['fvaresco'], 'TP_240m': ['rbarrere']}, 'DYN1-Mécanique': {'Cours_120m': ['mouisse', 'hlenoir'], 'Examen_120m': ['mouisse', 'ftrivaud', 'hlenoir', 'smallet'], 'TD_120m': ['smallet', 'ftrivaud', 'mouisse', 'hlenoir'], 'TP_240m': ['smallet', 'hlenoir', 'ftrivaud', 'mouisse'], 'Examen_240m': ['smallet', 'mouisse', 'ftrivaud', 'hlenoir'], 'Examen_150m': ['smallet', 'ftrivaud', 'hlenoir'], 'TD_240m': ['ftrivaud', 'smallet', 'hlenoir']}, 'SDM1-Céramiques': {'TD_120m': ['jtakadoum']}, 'LV2-Allemand': {'TD_120m': ['mkuhn']}, 'LV2-Anglais Renforcé': {'TD_120m': ['sbure']}, 'Réunion étudiants': {'Réunion ENSMM_60m': [], 'Réunion ENSMM_120m': []}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Réunion MuSki': {'Evénement_60m': []}, 'Info Entrepreunariat': {'Evénement_60m': ['jtakadoum']}, 'LV2-Japonais': {'TD_120m': ['mishii'], 'TD_90m': ['mishii']}, 'LV2-Espagnol': {'TD_150m': ['vhuamani'], 'TD_120m': ['vhuamani'], 'PRÉSENTIEL TD_120m': ['vhuamani'], 'TD_60m': ['vhuamani'], 'PRÉSENTIEL TD_60m': ['vhuamani']}, 'Présentation DD BsB/ENSMM': {'Réunion ENSMM_30m': []}, 'Soutenances stages': {'Examen_600m': []}, 'Matière à préciser': {'Examen_600m': []}, 'Service sanitaire': {'Conférence_120m': []}, 'Conférences': {'Aucun_120m': ['npiat']}, 'Réservation de salles': {'Réunion ENSMM_90m': []}}, 'FI-ORANGE': {'MECA0-Mécanique': {'Examen_180m': ['smallet'], 'Cours_120m': ['smallet'], 'Examen_120m': ['smallet'], 'TD_120m': ['smallet']}, 'PHY1-Complément de physique': {'Examen_120m': ['smarguer'], 'Cours_120m': ['smarguer'], 'TD_120m': ['smarguer']}, 'PHY2-Modélisation de commande': {'Examen_120m': ['ywu', 'jtoledo1'], 'Cours_120m': ['ywu'], 'TD_120m': ['jtoledo1']}, 'PHY3-Automatique générale': {'Examen_120m': ['krabenor'], 'Cours_120m': ['krabenor'], 'TD_120m': ['krabenor']}, 'LV1 Orange': {'TD_120m': ['croussil', 'sgaberel', 'jlaffert']}, 'Accueil': {'Réunion ENSMM_45m': ['pvairac', 'rjamault', 'npiat'], 'Réunion ENSMM_15m': ['mkuhn'], 'Réunion ENSMM_30m': ['jgavoill'], 'Réunion ENSMM_105m': ['jgavoill'], 'Réunion ENSMM_120m': ['fsthal', 'khaouchi']}, 'Réunion RI': {'Réunion ENSMM_90m': ['npiat']}, 'MATH0-Mathématique': {'Cours_120m': ['rtittare', 'ibaraqui'], 'Examen_120m': ['rtittare', 'ibaraqui'], 'TD_120m': ['rtittare', 'ibaraqui']}, 'Tutorat WIMS': {'TD_120m': ['pvautrin']}, 'Réunion': {'Réunion ENSMM_150m': ['rjamault']}, 'Réunion étudiants': {'Réunion ENSMM_60m': [], 'Réunion ENSMM_120m': []}, 'Réunion Bénévoles GALA': {'Evénement_75m': []}, 'Présentation DD BsB/ENSMM': {'Réunion ENSMM_30m': []}}, 'FC-AST': {'FC-AST-Matériaux': {'Cours_120m': ['jgavoill'], 'TD_240m': ['jgavoill'], 'TP_240m': ['jgavoill']}, 'FC-AST-Electronique': {'TP_120m': ['dteyssie'], 'TP_240m': ['dteyssie'], 'TD_240m': ['dteyssie']}, 'FC-AST-Mathématiques': {'Cours_120m': ['fvaresco', 'gnamah'], 'TD_120m': ['fvaresco', 'nalibaud', 'gnamah']}, 'FC-AST-Mécanique': {'Cours_120m': ['kmadani'], 'TD_120m': ['kmadani']}, 'FC-AST-Conception Mécanique': {'Cours_120m': ['emerat'], 'TD_120m': ['emerat']}, 'Accueil': {'Réunion ENSMM_60m': ['rjamault']}, 'FC-CP-Mathématiques': {'Aucun_120m': ['gnamah']}}, 'FI-International': {'Semaine intensive FLE': {'TD_210m': ['pventura'], 'TD_150m': ['pventura']}, 'LV2-FLE': {'TD_90m': ['pventura'], 'TD_120m': []}}, 'FA-MD2/MECA2': {'MATE3(MD2)/MATE1(MECA2)-Maté': {'Cours_120m': ['pstempfl'], 'Examen_120m': ['pstempfl']}}, 'FA-MD1/MECA2': {'MATE1(MD1)/MATE1(MECA2)-Matéri': {'Cours_120m': ['pbercot']}}, 'Préparation Double Diplôme': {'LV2-Allemand': {'TD_240m': ['mkuhn'], 'TD_300m': ['mkuhn'], 'TD_180m': ['mkuhn'], 'TD_90m': ['mkuhn']}}, 'FI-PFE': {'Réservation de salles': {'Réunion ENSMM_90m': []}, 'Réunion étudiants': {'Réunion ENSMM_60m': []}}, 'FI-Stage': {'Réunion étudiants': {'Réunion ENSMM_60m': []}, 'Réunion': {'Réunion ENSMM_60m': ['mouisse']}}}
    blacklist = ["MATH1(MD1)/MATH1(MECA1)-Maths","Réunion étudiants_FA-MD1/MECA1","PMI(MD1)/PMI(MECA1)","MATE2(MD2)/MATE2(MECA3)-Matéri","MATE2-Matériaux_FA-MD2/MECA3","MATE4(MD3)/MATE2(MECA3)-Matéri","Matière à préciser_FI-VERT","Matière à préciser_FI-JAUNE","MATE3(MD2)/MATE1(MECA2)-Maté","MATE1(MD1)/MATE1(MECA2)-Matéri","LV2-Allemand_Préparation Double Diplôme","Réservation de salles_FI-PFE","Réunion étudiants_FI-PFE","Réunion étudiants_FI-Stage","Réunion_FI-Stage"]
    for tp in mpt:
        for mod in mpt[tp]:
            modCorrige = isDuplicateModules(mod,tp,mpt)
            print(modCorrige)
            if modCorrige not in blacklist:
                newMPT = ModulePossibleTutors.objects.create(module=Module.objects.get(abbrev=modCorrige))
                newMPT.save()
                for ct in mpt[tp][mod]:
                    for tutor in mpt[tp][mod][ct]:
                        newMPT.possible_tutors.add(Tutor.objects.get(username=tutor))
                        newMPT.save()

def generate_course_preferences():
    U = UserPreference.objects.filter(user__username='jmnicod', week=None)
    for u in U:
        if u.start_time in [12 * 60, 18 * 60]:
            value = 0
        elif u.start_time in [8 * 60, 16 * 60]:
            value = 4
        else:
            value = 8
        for t in TrainingProgramme.objects.all():
            for ct in CourseType.objects.all():
                CoursePreference.objects.create(course_type=ct, train_prog = t, day = u.day,
                                                start_time = u.start_time, duration = u.duration, value = value)


def define_one_period_per_train_prog(book):
    weeks = book["settings"]["periods"].pop("annee")
    for tp in book["promotions"]:
        book["settings"]['periods'][tp[:20].replace('/', '-')] = weeks
    for m in book["modules"]:
        book['modules'][m]["period"] = book["modules"][m]["promotion"][:20].replace('/', '-')
