<!-- This file is part of the FlOpEDT/FlOpScheduler project.               -->
<!-- Copyright (c) 2017                                                    -->
<!-- Authors: Iulian Ober, Paul Renaud-Goud, Pablo Seban, et al.           -->
<!--                                                                       -->
<!-- This program is free software: you can redistribute it and/or modify  -->
<!-- it under the terms of the GNU Affero General Public License as        -->
<!-- published by the Free Software Foundation, either version 3 of the    -->
<!-- License, or (at your option) any later version.                       -->
<!--                                                                       -->
<!-- This program is distributed in the hope that it will be useful, but   -->
<!-- WITHOUT ANY WARRANTY; without even the implied warranty of            -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU      -->
<!-- Affero General Public License for more details.                       -->
<!--                                                                       -->
<!-- You should have received a copy of the GNU Affero General Public      -->
<!-- License along with this program. If not, see                          -->
<!-- <http://www.gnu.org/licenses/>.                                       -->
<!--                                                                       -->
<!-- You can be released from the requirements of the license by purchasing -->
<!-- a commercial license. Buying such a license is mandatory as soon as   -->
<!-- you develop activities involving the FlOpEDT/FlOpScheduler software   -->
<!-- without disclosing the source code of your own applications.          -->

{% extends "base.html" %}

{% csrf_token %}



{% block title %} EDT {% endblock %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'base/better.css' %}"/>
  <script src="{% static 'base/d3.v4.min.js' %}"></script>
  <!-- script src="https://d3js.org/d3.v4.min.js"></script -->
  <script>
    var url_fetch_user_dweek = "{% url 'base:fetch_user_dweek' department '.' %}";
    url_fetch_user_dweek = url_fetch_user_dweek.slice(0, -1);
    var url_fetch_course_dweek = "{% url 'base:fetch_course_dweek' department '.' '.' %}";
    url_fetch_course_dweek = url_fetch_course_dweek.slice(0, -3);
    
    var url_user_pref_changes = "{% url "base:user_pref_changes" department 0 0 '.' %}";
    url_user_pref_changes = url_user_pref_changes.slice(0, -5);
    var url_course_pref_changes = "{% url 'base:course_pref_changes' department 0 0 '.' '.' %}";
    url_course_pref_changes = url_course_pref_changes.slice(0, -7);

    var url_course_types = "{% url "base:fetch_course_types" department %}";
    var url_training_programmes = "{% url "base:fetch_training_programmes" department %}";
    var url_all_tutors = "{% url 'base:fetch_all_tutors' department %}";
    
    var logged_usr = {nom:"{{ name_usr }}", rights: -1};
    var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
    var url_login = "{% url 'people:login' %}";
    var annee_courante = "{{ annee_courante }}" ;
    var time_settings = {{ time_settings | safe }} ;
    var days = {{ days | safe }} ;
  </script>
  </script>
<body>
  <div  id="tools-main" style="width: 100%; overflow: hidden;">
    <div id="svg" style="width: 680px; float: left;"></div>
    <div style="margin-left: 700px;">
      <form style="white-space: nowrap;" name="app" action="javascript:apply_stype_from_button(false)" id="form-nweek">
	<fieldset>
	  <legend>Semaines particulières</legend>
	  Appliquer la configuration ci-contre<br/>
	  de la semaine
	  <input type="number" name="se_deb" style="width: 40px" value="{{ date_deb.semaine }}" min="1" max="53">, année
	  <input type="number" name="an_deb" style="width: 60px" value="{{ date_deb.an }}" min="{{annee_courante}}" max="{{annee_courante|add:"1"}}"></br>
	  à la semaine
	    <input type="number" name="se_fin" style="width: 40px" value="{{ date_fin.semaine }}" min="1" max="53">, année
	    <input type="number" name="an_fin" style="width: 60px" value="{{ date_fin.an }}" min="{{annee_courante}}" max="{{annee_courante|add:"1"}}"></br></br>
	    <input type="submit" name="apply" value="Appliquer">
	</fieldset></br></br>
      </form>
      <fieldset>
	<legend>Semaine type</legend>
	<form style="white-space: nowrap;" name="sav"  action="javascript:apply_stype_from_button(true)" id="form-dweek">
	  Redéfinir ma semaine type<br/>
          <br/>
          <input type="submit" name="save" value="Sauvegarder"></br>	  </fieldset>
      </form><br/>
      <!--{% if err %}<p><strong>{{ err }}</strong></p>{% endif %}
	-->
      <span id="ack"></span>
    </div>
  </div>
</body>
<script type='text/javascript' src="{% static 'base/stype_side_panel.js' %}"></script>
<script type='text/javascript' src="{% static 'base/intervals.js' %}"></script>
<script type='text/javascript' src="{% static 'base/week_change.js' %}"></script>
<script type='text/javascript' src="{% static 'base/transformation.js' %}"></script>
<script type='text/javascript' src="{% static 'base/creation.js' %}"></script>
<script type='text/javascript' src="{% static 'base/action.js' %}"></script>
<script type='text/javascript' src="{% static 'base/update.js' %}"></script>
<script type='text/javascript' src="{% static 'base/variables.js' %}?2"></script>
<script type='text/javascript' src="{% static 'base/stype.js' %}"></script>

{% endblock %}

{% block side_panel %}
<div>
  <p onclick="show_tutors()" class="btn_panel">Profs</p>
  <p id="sp_tutor">Transformation en : 
    <select id="dd_tutors">
    </select>
  </p>
</div>
<div>
  <p onclick="show_course_types()" class="btn_panel">Types de cours</p>
  <div id="sp_course_type">
    <p> Promo :
      <select id="dd_programmes">
      </select>
    </p>
    <p> Type de cours :
      <select id="dd_course_types">
      </select>
    </p>
  </div>
</div>
{% endblock %}
